#include "Koopasv.h"
#include <iostream>

//CLASE CREADA
#include "Enemigos.h"

//LIBRERIAS DE SFML
#include <SFML/Graphics.hpp>
#include<SFML/Audio.hpp>

using namespace sf;

Koopasv::Koopasv() : Enemigos()
{
    //ctor
}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

void Koopasv::Imagen_sprite()
{
    txt_enemigo->loadFromFile("Imagenes/enemigos/Koopa volador/Koopav1.png");
    spr_enemigo->setTexture(*txt_enemigo);
}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

void Koopasv::Movimiento()
{
    vel_y+=0.1;
    ey+=vel_y;
    if(ey>=mx)
    {
        vel_y=-4;
    }


}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

void Koopasv::pos_enem(std::vector <Enemigos *> enemigos)
{
    srand(time(NULL));

    for (int i=4;i<8;i++)
    {
        enemigos[i]->ex = (rand() % 493) +i*5;
        enemigos[i]->ey = rand() % 697;
        mx=enemigos[i]->ey+10;
    }


}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

void Koopasv::Colision(int &px, int &py, float &pdx)
{
    if((px + 50 > ex) && (px + 25 < ex + 58)
    && (py + 73 > ey) && (py + 73 < ey + 83) && (pdx > 0))
    {
        puntos_enem+=1.2;
        std::cout<<"koopa"<<puntos_enem<<std::endl;
        pdx = -10;
        vel_y+=0.1;
    }
}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

Sprite Koopasv::devol_spr()
{
    if(ex<300)
    {
        txt_enemigo->loadFromFile("Imagenes/enemigos/Koopa volador/Koopav1.png");
    }
    else if(ex>300)
    {
        txt_enemigo->loadFromFile("Imagenes/enemigos/Koopa volador/Koopav2.png");
    }
    return *spr_enemigo;
}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

Koopasv::~Koopasv()
{
    delete txt_enemigo;
    delete spr_enemigo;
}
