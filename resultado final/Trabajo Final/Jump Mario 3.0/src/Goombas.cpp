#include "Goombas.h"
#include <iostream>

//CLASE CREADA
#include "Enemigos.h"

//LIBRERIAS DE SFML
#include <SFML/Graphics.hpp>
#include<SFML/Audio.hpp>

using namespace sf;

Goombas::Goombas() : Enemigos()
{

}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

void Goombas::Imagen_sprite()
{

    txt_enemigo->loadFromFile("Imagenes/enemigos/Gombas/Gombas1.png");
    spr_enemigo->setTexture(*txt_enemigo);
}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

void Goombas::Movimiento()
{
    vel_x+=0.1;
    ex+=vel_x;
    mx=ex+76;
}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

Sprite Goombas::devol_spr()
{
    if (vel_x>0)
    {
        txt_enemigo->loadFromFile("Imagenes/enemigos/Gombas/Gombas1.png");
        spr_enemigo->setTexture(*txt_enemigo);
    }
    else if(vel_x<0)
    {
        txt_enemigo->loadFromFile("Imagenes/enemigos/Gombas/Gombas4.png");
        spr_enemigo->setTexture(*txt_enemigo);
    }

    return *spr_enemigo;
}


///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

void Goombas::Colision(int &px, int &py, float &pdx, int* &vidas)
{
    if((px + 50 > ex) && (px + 25 < ex + 29)
    && (py + 73 > ey) && (py + 73 < ey + 11) && (pdx > 0))
    {
        std::cout<<"goombas :"<<*puntos_enem<<std::endl;
        *puntos_enem+=1;
        txt_enemigo->loadFromFile("Imagenes/enemigos/Gombas/goombadead.png");
        pdx = -10;
    }

    else if((px + 50 > ex+11) && (px + 25 < ex + 29)
    && (py + 73 > ey+11) && (py + 73 < ey + 31) && (py < ey + 31))
    {
        *vidas-=1;
        std::cout<<*vidas<<std::endl;
    }
}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

int Goombas::devo_puntos()
{
    return *puntos_enem;
}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

int Goombas::devo_puntos_iniciales()
{
    *puntos_enem=0;
    return *puntos_enem;
}

///////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////

Goombas::~Goombas()
{
    delete txt_enemigo;
    delete spr_enemigo;

}
